<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Simulador de NPS e Impacto no Faturamento (B2C)</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header class="app-header">
      <div class="container header-inner">
        <div>
          <h1>Simulador de NPS e Impacto no Faturamento (B2C)</h1>
          <p class="subtitle">
            Ajuste os campos e veja como mudanças no NPS e na migração entre grupos (Detratores, Neutros, Promotores)
            afetam a receita no período escolhido.
          </p>
        </div>
        <div class="global-controls">
          <label class="field">
            <span class="label">Período (meses)</span>
            <input id="input-meses" type="number" min="1" step="1" value="1" />
            <small class="help">
              Dica: use 1 para reproduzir exatamente os totais da planilha. Aumente (ex.: 24) para simular horizonte maior.
            </small>
          </label>
          <button id="btn-reset" class="btn ghost">Resetar padrões</button>
        </div>
      </div>
    </header>

    <main class="container">
      <nav class="tabs">
        <button class="tab active" data-tab="recorrentes">Recorrentes</button>
        <button class="tab" data-tab="eventuais">Eventuais</button>
        <button class="tab" data-tab="total">Total</button>
      </nav>

      <!-- Painel Recorrentes -->
      <section class="panel active" id="panel-recorrentes">
        <div class="grid">
          <aside class="card inputs">
            <h2>Entradas — Recorrentes</h2>

            <div class="field-group">
              <label class="label">Base de Modelo</label>
              <div class="segmented">
                <label><input type="radio" name="rec-base-mode" value="coorte" checked /> Coorte (respostas)</label>
                <label><input type="radio" name="rec-base-mode" value="real" /> Base real (todos)</label>
                <label><input type="radio" name="rec-base-mode" value="custom" /> Personalizado</label>
              </div>
              <small class="help">Escolha entre o total de respostas (coorte), a base real de clientes, ou informe um número manual.</small>

              <div class="inline">
                <label class="field grow">
                  <span class="label">Base (clientes)</span>
                  <input id="rec-base" type="number" min="0" step="1" />
                </label>
              </div>
            </div>

            <div class="divider"></div>

            <h3>Distribuição de NPS (%)</h3>
            <small class="help">Informe a proporção de clientes em cada grupo. A soma sempre será 100%.</small>
            <div class="triple">
              <label class="field">
                <span class="label">Promotores</span>
                <input id="rec-pro" type="number" min="0" max="100" step="0.01" />
              </label>
              <label class="field">
                <span class="label">Neutros</span>
                <input id="rec-neu" type="number" min="0" max="100" step="0.01" />
              </label>
              <label class="field">
                <span class="label">Detratores</span>
                <input id="rec-det" type="number" min="0" max="100" step="0.01" />
              </label>
            </div>

            <div class="divider"></div>

            <h3>Ticket médio (R\$ por cliente)</h3>
            <small class="help">Valor médio de gasto de cada cliente do grupo no período mensal.</small>
            <div class="triple">
              <label class="field">
                <span class="label">Promotores</span>
                <input id="rec-tk-pro" type="number" min="0" step="0.0001" />
              </label>
              <label class="field">
                <span class="label">Neutros</span>
                <input id="rec-tk-neu" type="number" min="0" step="0.0001" />
              </label>
              <label class="field">
                <span class="label">Detratores</span>
                <input id="rec-tk-det" type="number" min="0" step="0.0001" />
              </label>
            </div>

            <div class="divider"></div>

            <h3>Conversão simulada</h3>
            <label class="field">
              <span class="label">Tipo de conversão</span>
              <select id="rec-modelo">
                <option value="detToPro">Modelo 01 — Detratores → Promotores</option>
                <option value="neuToPro">Modelo 02 — Neutros → Promotores</option>
                <option value="detToNeu">Modelo 03 — Detratores → Neutros</option>
              </select>
              <small class="help">Escolha qual movimento deseja simular entre os grupos.</small>
            </label>

            <label class="field">
              <div class="label-row">
                <span class="label">Pontos de Alteração (%)</span>
                <span class="pill" id="rec-max-pill">Máx. —</span>
              </div>
              <input id="rec-mig" type="range" min="0" max="100" step="0.01" />
              <div class="inline">
                <input id="rec-mig-num" type="number" min="0" max="100" step="0.01" />
                <small class="help">Quanto do grupo de origem migrará para o destino. Limitado à fração disponível do grupo de origem.</small>
              </div>
            </label>
          </aside>

          <section class="card results">
            <h2>Resultados — Recorrentes</h2>
            <div class="kpis">
              <div class="kpi">
                <div class="kpi-title">NPS Atual</div>
                <div class="kpi-value" id="rec-nps-atual">—</div>
              </div>
              <div class="kpi">
                <div class="kpi-title">NPS Simulado</div>
                <div class="kpi-value" id="rec-nps-sim">—</div>
              </div>
              <div class="kpi">
                <div class="kpi-title">Receita no período (Atual)</div>
                <div class="kpi-value" id="rec-receita-atual">—</div>
                <div class="kpi-note">Meses: <span id="rec-meses-note">1</span></div>
              </div>
              <div class="kpi">
                <div class="kpi-title">Receita no período (Simulado)</div>
                <div class="kpi-value" id="rec-receita-sim">—</div>
              </div>
              <div class="kpi delta">
                <div class="kpi-title">Faturamento Adicionado</div>
                <div class="kpi-value" id="rec-delta">—</div>
              </div>
            </div>

            <div class="cards">
              <div class="mini-card">
                <div class="mini-title">Distribuição atual</div>
                <div class="bar" id="rec-bar-atual"></div>
                <small class="legend">
                  <span class="dot pro"></span> Pro •
                  <span class="dot neu"></span> Neu •
                  <span class="dot det"></span> Det
                </small>
              </div>
              <div class="mini-card">
                <div class="mini-title">Distribuição simulada</div>
                <div class="bar" id="rec-bar-sim"></div>
                <small class="legend">
                  <span class="dot pro"></span> Pro •
                  <span class="dot neu"></span> Neu •
                  <span class="dot det"></span> Det
                </small>
              </div>
            </div>
          </section>
        </div>
      </section>

      <!-- Painel Eventuais -->
      <section class="panel" id="panel-eventuais">
        <div class="grid">
          <aside class="card inputs">
            <h2>Entradas — Eventuais</h2>

            <div class="field-group">
              <label class="label">Base de Modelo</label>
              <div class="segmented">
                <label><input type="radio" name="evt-base-mode" value="coorte" checked /> Coorte (respostas)</label>
                <label><input type="radio" name="evt-base-mode" value="real" /> Base real (todos)</label>
                <label><input type="radio" name="evt-base-mode" value="custom" /> Personalizado</label>
              </div>
              <small class="help">Escolha entre o total de respostas (coorte), a base real de clientes, ou informe um número manual.</small>

              <div class="inline">
                <label class="field grow">
                  <span class="label">Base (clientes)</span>
                  <input id="evt-base" type="number" min="0" step="1" />
                </label>
              </div>
            </div>

            <div class="divider"></div>

            <h3>Distribuição de NPS (%)</h3>
            <small class="help">Informe a proporção de clientes em cada grupo. A soma sempre será 100%.</small>
            <div class="triple">
              <label class="field">
                <span class="label">Promotores</span>
                <input id="evt-pro" type="number" min="0" max="100" step="0.01" />
              </label>
              <label class="field">
                <span class="label">Neutros</span>
                <input id="evt-neu" type="number" min="0" max="100" step="0.01" />
              </label>
              <label class="field">
                <span class="label">Detratores</span>
                <input id="evt-det" type="number" min="0" max="100" step="0.01" />
              </label>
            </div>

            <div class="divider"></div>

            <h3>Ticket médio (R\$ por cliente)</h3>
            <small class="help">Valor médio de gasto de cada cliente do grupo no período mensal.</small>
            <div class="triple">
              <label class="field">
                <span class="label">Promotores</span>
                <input id="evt-tk-pro" type="number" min="0" step="0.0001" />
              </label>
              <label class="field">
                <span class="label">Neutros</span>
                <input id="evt-tk-neu" type="number" min="0" step="0.0001" />
              </label>
              <label class="field">
                <span class="label">Detratores</span>
                <input id="evt-tk-det" type="number" min="0" step="0.0001" />
              </label>
            </div>

            <div class="divider"></div>

            <h3>Conversão simulada</h3>
            <label class="field">
              <span class="label">Tipo de conversão</span>
              <select id="evt-modelo">
                <option value="detToPro">Modelo 01 — Detratores → Promotores</option>
                <option value="neuToPro">Modelo 02 — Neutros → Promotores</option>
                <option value="detToNeu">Modelo 03 — Detratores → Neutros</option>
              </select>
              <small class="help">Escolha qual movimento deseja simular entre os grupos.</small>
            </label>

            <label class="field">
              <div class="label-row">
                <span class="label">Pontos de Alteração (%)</span>
                <span class="pill" id="evt-max-pill">Máx. —</span>
              </div>
              <input id="evt-mig" type="range" min="0" max="100" step="0.01" />
              <div class="inline">
                <input id="evt-mig-num" type="number" min="0" max="100" step="0.01" />
                <small class="help">Quanto do grupo de origem migrará para o destino. Limitado à fração disponível do grupo de origem.</small>
              </div>
            </label>
          </aside>

          <section class="card results">
            <h2>Resultados — Eventuais</h2>
            <div class="kpis">
              <div class="kpi">
                <div class="kpi-title">NPS Atual</div>
                <div class="kpi-value" id="evt-nps-atual">—</div>
              </div>
              <div class="kpi">
                <div class="kpi-title">NPS Simulado</div>
                <div class="kpi-value" id="evt-nps-sim">—</div>
              </div>
              <div class="kpi">
                <div class="kpi-title">Receita no período (Atual)</div>
                <div class="kpi-value" id="evt-receita-atual">—</div>
                <div class="kpi-note">Meses: <span id="evt-meses-note">1</span></div>
              </div>
              <div class="kpi">
                <div class="kpi-title">Receita no período (Simulado)</div>
                <div class="kpi-value" id="evt-receita-sim">—</div>
              </div>
              <div class="kpi delta">
                <div class="kpi-title">Faturamento Adicionado</div>
                <div class="kpi-value" id="evt-delta">—</div>
              </div>
            </div>

            <div class="cards">
              <div class="mini-card">
                <div class="mini-title">Distribuição atual</div>
                <div class="bar" id="evt-bar-atual"></div>
                <small class="legend">
                  <span class="dot pro"></span> Pro •
                  <span class="dot neu"></span> Neu •
                  <span class="dot det"></span> Det
                </small>
              </div>
              <div class="mini-card">
                <div class="mini-title">Distribuição simulada</div>
                <div class="bar" id="evt-bar-sim"></div>
                <small class="legend">
                  <span class="dot pro"></span> Pro •
                  <span class="dot neu"></span> Neu •
                  <span class="dot det"></span> Det
                </small>
              </div>
            </div>
          </section>
        </div>
      </section>

      <!-- Painel Total -->
      <section class="panel" id="panel-total">
        <section class="card results">
          <h2>Resultados — Total (Recorrentes + Eventuais)</h2>
          <p class="muted">Soma dos segmentos usando o mesmo número de meses definido no topo.</p>
          <div class="kpis">
            <div class="kpi">
              <div class="kpi-title">Receita no período (Atual)</div>
              <div class="kpi-value" id="tot-receita-atual">—</div>
              <div class="kpi-note">Meses: <span id="tot-meses-note">1</span></div>
            </div>
            <div class="kpi">
              <div class="kpi-title">Receita no período (Simulado)</div>
              <div class="kpi-value" id="tot-receita-sim">—</div>
            </div>
            <div class="kpi delta">
              <div class="kpi-title">Faturamento Adicionado</div>
              <div class="kpi-value" id="tot-delta">—</div>
            </div>
          </div>
        </section>
      </section>
    </main>

    <footer class="app-footer">
      <div class="container">
        <small>
          Notas:
          1) Os valores iniciais reproduzem a planilha (usando base “Coorte” e período de 1 mês).
          2) “Pontos de Alteração” é limitado pelo tamanho do grupo de origem.
          3) NPS = 100 × (Promotores − Detratores).
        </small>
      </div>
    </footer>

    <script src="script.js" defer></script>
  </body>
</html>
